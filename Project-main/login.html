<div class="container" style="padding-top: 2rem;">
  <div class="card" style="max-width: 500px; margin: 0 auto;">
    <div class="card-header">
      <h1 class="card-title">Login to QuicReF</h1>
      <p class="card-subtitle">Enter your credentials to access your account</p>
    </div>
    <div class="card-content">
      <div id="login-alert" class="alert alert-error mb-4 hidden"></div>
      
      <form id="login-form">
        <div class="form-group">
          <label for="email" class="form-label">Email address</label>
          <input type="email" id="email" class="form-control" placeholder="your@email.com" required>
        </div>
        
        <div class="form-group">
          <label for="password" class="form-label">Password</label>
          <input type="password" id="password" class="form-control" placeholder="Your password" required>
        </div>
        
        <button type="submit" id="login-button" class="btn btn-primary btn-block mb-3">
          Log In
        </button>
        
        <p class="text-center">
          Don't have an account? <a href="/signup">Sign up</a>
        </p>
      </form>
    </div>
  </div>
</div>

<script>
function initloginPage() {
  document.title = "Login - QuicReF";
  
  // Get form elements
  const loginForm = document.getElementById('login-form');
  const emailInput = document.getElementById('email');
  const passwordInput = document.getElementById('password');
  const loginButton = document.getElementById('login-button');
  const loginAlert = document.getElementById('login-alert');
  
  // Add form submission handler
  loginForm.addEventListener('submit', async (e) => {
    e.preventDefault();
    
    // Clear previous errors
    loginAlert.classList.add('hidden');
    loginAlert.textContent = '';
    
    // Disable button during login
    loginButton.disabled = true;
    loginButton.innerHTML = '<div class="loading-spinner" style="width: 20px; height: 20px; margin: 0 auto;"></div>';
    
    // Get form values
    const email = emailInput.value.trim();
    const password = passwordInput.value;
    
    // Validate email
    if (!isValidEmail(email)) {
      showError('Please enter a valid email address.');
      return;
    }
    
    // Validate password
    if (password.length < 6) {
      showError('Password must be at least 6 characters long.');
      return;
    }
    
    try {
      // Attempt login
      const result = await Auth.login(email, password);
      
      if (result.success) {
        // Redirect to homepage on success
        Router.navigate('/');
      } else {
        // Show error
        showError(result.error || 'Failed to login. Please check your credentials and try again.');
      }
    } catch (error) {
      console.error('Login error:', error);
      showError('An unexpected error occurred. Please try again.');
    }
  });
  
  // Helper function to show error
  function showError(message) {
    loginButton.disabled = false;
    loginButton.textContent = 'Log In';
    loginAlert.textContent = message;
    loginAlert.classList.remove('hidden');
  }
  
  // Helper function to validate email
  function isValidEmail(email) {
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    return emailRegex.test(email);
  }
}
</script>